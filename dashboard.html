<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body class="bg-light">
<nav class="navbar navbar-dark bg-primary mb-4">
  <div class="container-fluid">
    <span class="navbar-brand" id="userGreeting"></span>
    <button id="logout" class="btn btn-outline-light">Logout</button>
  </div>
</nav>

<div class="container">
  <div class="card shadow">
    <div class="card-body">
      <h3>Welcome to your secure dashboard!</h3>
      <p>Only logged-in users can see this page.</p>
    </div>
  </div>
</div>

<script>
  const api = { /* same as above */ };
  const token = localStorage.getItem('sessionToken');

  if (!token) { location.href='login.html'; }

  api.validate(token).then(r=>{
    document.getElementById('userGreeting').textContent = `Hello, ${r.name}!`;
  }).catch(err=>{
    Swal.fire('Session expired', err, 'warning').then(()=>location.href='login.html');
  });

  document.getElementById('logout').addEventListener('click',()=>{
    localStorage.removeItem('sessionToken');
    location.href='login.html';
  });
</script>
</body>
</html>
